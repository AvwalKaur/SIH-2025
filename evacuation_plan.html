<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jeevansetu - Interactive Evacuation Plan</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    :root {
        --primary: #1a73e8; --secondary: #0b4fa3; --accent: #ff6b35;
        --light: #f5f7f9; --dark: #2c3e50; --success: #28a745; --danger: #dc3545;
        --gray: #6c757d; --light-gray: #e9ecef; --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
        --transition: all 0.3s ease;
    }
    body { background:#f0f2f5; color:#333; display:flex; min-height:100vh; line-height:1.6; }
    /* Sidebar */
    .sidebar { width:260px; background: linear-gradient(to bottom, var(--primary), var(--secondary)); color:white; padding:20px 0; height:100vh; position:fixed; overflow-y:auto; transition:var(--transition); z-index:1000; }
    .logo { padding:0 20px 20px; border-bottom:1px solid rgba(255,255,255,0.1); margin-bottom:20px; }
    .logo h1 { font-size:24px; display:flex; align-items:center; gap:10px; }
    .logo span { color: var(--accent); }
    .nav-menu { list-style:none; padding:0; }
    .nav-item { margin-bottom:5px; }
    .nav-link { display:flex; align-items:center; padding:12px 20px; color:rgba(255,255,255,0.8); text-decoration:none; transition:var(--transition); font-size:16px; }
    .nav-link:hover, .nav-link.active { background-color: rgba(255,255,255,0.1); color:white; border-left:4px solid var(--accent); }
    .nav-link i { margin-right:12px; font-size:18px; width:24px; text-align:center; }

    /* Main Content */
    .main-content { flex:1; margin-left:260px; padding:20px; transition:var(--transition); }
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; background:white; padding:20px 25px; border-radius:12px; box-shadow:var(--card-shadow); transition:var(--transition); }
    .welcome h2 { color: var(--dark); margin-bottom:5px; font-size:1.5rem; }
    .welcome p { color: var(--gray); font-size:0.95rem; }
    .user-info { display:flex; align-items:center; gap:15px; }
    .user-img { width:45px; height:45px; border-radius:50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:18px; box-shadow:0 4px 8px rgba(0,0,0,0.1); transition:var(--transition); }
    .user-img:hover { transform: scale(1.05); }

    .page-title { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }
    .page-title h2 { color: var(--dark); font-size:1.8rem; font-weight:700; }
    .page-title p { color: var(--gray); margin-top:5px; font-size:0.95rem; }

    .btn { padding:14px 24px; border:none; border-radius:8px; font-size:16px; font-weight:500; cursor:pointer; display:inline-flex; align-items:center; gap:8px; transition:var(--transition); }
    .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color:white; box-shadow:0 4px 8px rgba(26,115,232,0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow:0 6px 12px rgba(26,115,232,0.4); }
    .btn-outline { background:transparent; border:2px solid var(--primary); color:var(--primary); }
    .btn-outline:hover { background-color: rgba(26,115,232,0.1); }

    .selection-panel, .map-container, .instructions-panel { background:white; border-radius:12px; padding:25px; box-shadow:var(--card-shadow); margin-bottom:30px; transition:var(--transition); }
    .section-title { font-size:1.4rem; color: var(--dark); margin-bottom:10px; font-weight:600; }
    .section-subtitle { color: var(--gray); font-size:0.95rem; margin-bottom:20px; }

    .form-row { display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:20px; margin-bottom:20px; }
    .form-group { margin-bottom:20px; position:relative; }
    .form-label { display:block; margin-bottom:8px; font-weight:500; color: var(--dark); font-size:0.95rem; }
    .form-control { width:100%; padding:14px 16px; border:1px solid var(--light-gray); border-radius:8px; font-size:16px; background-color: var(--light); transition:var(--transition); }
    .form-control:focus { outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(26,115,232,0.2); }

    .map-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .map-content { position:relative; height:500px; overflow:hidden; border-radius:8px; }

    .map-content img { width:100%; height:100%; object-fit:contain; }

    /* Evacuation routes & markers */
    .evacuation-route { position:absolute; background-color: rgba(220,53,69,0.5); z-index:10; transition: all 0.3s ease; }
    .exit-marker { position:absolute; width:24px; height:24px; background-color: var(--danger); border-radius:50%; border:3px solid white; box-shadow:0 2px 6px rgba(0,0,0,0.3); z-index:20; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:12px; }
    .location-marker { position:absolute; width:20px; height:20px; background-color: var(--primary); border-radius:50%; border:2px solid white; box-shadow:0 2px 6px rgba(0,0,0,0.3); z-index:15; cursor:pointer; }
    .location-marker.selected { background-color: var(--accent); width:24px; height:24px; z-index:25; }

    .location-marker:hover::after {
        content: attr(data-location);
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--dark);
        color:white;
        padding:3px 8px;
        font-size:0.75rem;
        border-radius:4px;
        white-space:nowrap;
    }

    .location-info { position:absolute; background:white; padding:15px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:30; max-width:300px; display:none; }

    /* Instructions Panel */
    .instruction-item { display:flex; gap:15px; margin-bottom:20px; padding-bottom:20px; border-bottom:1px solid var(--light-gray); }
    .instruction-item:last-child { margin-bottom:0; padding-bottom:0; border-bottom:none; }
    .instruction-icon { width:40px; height:40px; border-radius:50%; background: linear-gradient(135deg, rgba(26,115,232,0.1), rgba(11,79,163,0.1)); color: var(--primary); display:flex; align-items:center; justify-content:center; font-size:18px; flex-shrink:0; }
    .instruction-content h4 { color: var(--dark); margin-bottom:5px; font-size:1.1rem; }
    .instruction-content p { color: var(--gray); font-size:0.95rem; }

    .footer { text-align:center; padding:20px; color: var(--gray); font-size:0.9rem; margin-top:auto; }

    /* Responsive */
    @media (max-width:992px){.sidebar{width:70px;}.sidebar .logo h1 span,.sidebar .nav-link span{display:none;}.sidebar .logo h1{justify-content:center;}.main-content{margin-left:70px;}}
    @media (max-width:768px){.header{flex-direction:column;text-align:center;gap:15px;}.user-info{justify-content:center;}.form-row{grid-template-columns:1fr;}.page-title{flex-direction:column;text-align:center;gap:15px;}.map-header{flex-direction:column;gap:15px;align-items:flex-start;}.map-content{height:400px;}}
    @media (max-width:576px){.main-content{padding:15px;}.header{padding:15px;}.selection-panel,.map-container,.instructions-panel{padding:20px;}}
</style>
</head>
<body>
<aside class="sidebar">
    <div class="logo"><h1><i class="fas fa-shield-alt"></i> <span>JeevanSetu</span></h1></div>
    <ul class="nav-menu">
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-map-marked-alt"></i><span>Evacuation Plan</span></a></li>
    </ul>
</aside>

<main class="main-content">
    <div class="header">
        <div class="welcome">
            <h2>Welcome back, Priya!</h2>
            <p>View evacuation routes and safety plans</p>
        </div>
        <div class="user-info"><div class="user-img">P</div></div>
    </div>

    <div class="page-title">
        <div>
            <h2>IGDTUW Evacuation Plan</h2>
            <p>Select your current location to view evacuation route</p>
        </div>
        <button class="btn btn-primary"><i class="fas fa-download"></i> Download Plan</button>
    </div>

    <div class="selection-panel">
        <h3 class="section-title">Select Your Location</h3>
        <p class="section-subtitle">Choose building and floor</p>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="buildingSelect"><i class="fas fa-building"></i> Select Building</label>
                <select class="form-control" id="buildingSelect">
                    <option value="">Select a building</option>
                    <option value="admin">Admin Building</option>
                    <option value="cse">CSE Block</option>
                    <option value="it">IT Block</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="floorSelect"><i class="fas fa-layer-group"></i> Select Floor</label>
                <select class="form-control" id="floorSelect">
                    <option value="">Select floor</option>
                    <option value="ground">Ground Floor</option>
                    <option value="first">First Floor</option>
                    <option value="second">Second Floor</option>
                    <option value="third">Third Floor</option>
                </select>
            </div>
        </div>
        <button class="btn btn-primary" id="showRoute"><i class="fas fa-route"></i> Show Route</button>
    </div>

    <div class="map-container">
    <div class="map-header">
        <h3 class="section-title">IGDTUW Campus Evacuation Map</h3>
        <button class="btn btn-outline" id="resetMap"><i class="fas fa-sync-alt"></i> Reset View</button>
    </div>
    <div class="map-content">
        <img id="floorMap" src="images/admin_first.png" alt="Floor Map" style="width:100%; height:auto; border-radius:8px;">
        
        <div class="evacuation-route" id="routeOverlay"></div>
        <div class="exit-marker" id="exit1">1</div>
        <div class="exit-marker" id="exit2">2</div>
        <div class="exit-marker" id="exit3">3</div>

        <div class="location-info" id="locationInfo"></div>
    </div>
</div>


    <div class="instructions-panel">
        <h3 class="section-title">Evacuation Instructions</h3>
        <div class="instruction-item">
            <div class="instruction-icon"><i class="fas fa-walking"></i></div>
            <div class="instruction-content">
                <h4>Follow Marked Routes</h4>
                <p>Use designated evacuation paths highlighted on the map for safe exit.</p>
            </div>
        </div>
        <div class="instruction-item">
            <div class="instruction-icon"><i class="fas fa-sign-exclamation"></i></div>
            <div class="instruction-content">
                <h4>Do Not Use Lifts</h4>
                <p>Elevators may be unsafe during emergencies. Use stairs to evacuate immediately.</p>
            </div>
        </div>
    </div>

    <div class="footer">&copy; 2025 JeevanSetu. All Rights Reserved.</div>
</main>

<script>
// Get elements
const buildingSelect = document.getElementById('buildingSelect');
const floorSelect = document.getElementById('floorSelect');
const showRouteBtn = document.getElementById('showRoute');
const resetMapBtn = document.getElementById('resetMap');
const mapContent = document.querySelector('.map-content');
const campusMap = document.querySelector('.campus-map');
const locationInfo = document.getElementById('locationInfo');

let selectedMarker = null;

// Define evacuation routes for each building-floor
// Example coordinates (top, left, width, height) in pixels; adjust per your map images
const routes = {
    'admin_first': [
        { top: 100, left: 150, width: 200, height: 20 },
        { top: 150, left: 300, width: 100, height: 20 }
    ],
    'admin_second': [
        { top: 80, left: 100, width: 180, height: 20 }
    ],
    'cse_first': [
        { top: 50, left: 120, width: 220, height: 20 }
    ],
    'cse_second': [
        { top: 70, left: 140, width: 200, height: 20 }
    ],
    'cse_third': [
        { top: 60, left: 160, width: 210, height: 20 }
    ],
    'it_ground': [
        { top: 90, left: 130, width: 190, height: 20 }
    ],
    'it_first': [
        { top: 100, left: 150, width: 200, height: 20 }
    ],
    'it_second': [
        { top: 110, left: 160, width: 180, height: 20 }
    ],
    'it_third': [
        { top: 120, left: 170, width: 200, height: 20 }
    ]
};

// Clear existing routes
function clearRoutes() {
    const existingRoutes = document.querySelectorAll('.evacuation-route');
    existingRoutes.forEach(r => r.remove());
}

// Handle location marker clicks
mapContent.addEventListener('click', (e) => {
    if(e.target.classList.contains('location-marker')) {
        if(selectedMarker) selectedMarker.classList.remove('selected');
        selectedMarker = e.target;
        selectedMarker.classList.add('selected');

        // Show info tooltip
        locationInfo.innerHTML = `<strong>${selectedMarker.dataset.location}</strong><br>${selectedMarker.dataset.info}`;

        const rect = selectedMarker.getBoundingClientRect();
        const mapRect = mapContent.getBoundingClientRect();
        let leftPos = rect.left - mapRect.left + rect.width/2 - locationInfo.offsetWidth/2;
        let topPos = rect.top - mapRect.top - locationInfo.offsetHeight - 10;
        leftPos = Math.max(10, Math.min(leftPos, mapRect.width - locationInfo.offsetWidth - 10));
        topPos = Math.max(10, topPos);

        locationInfo.style.left = leftPos + 'px';
        locationInfo.style.top = topPos + 'px';
        locationInfo.style.display = 'block';
    }
});

// Show evacuation routes
showRouteBtn.addEventListener('click', () => {
    const building = buildingSelect.value;
    const floor = floorSelect.value;

    if(!building || !floor) {
        alert('Please select both building and floor');
        return;
    }

    const key = `${building}_${floor}`;
    
    // Update campus map image
    campusMap.innerHTML = `<img src="images/floor_maps/${key}.jpg" alt="${key}" style="width:100%; height:100%; object-fit:cover;">`;

    // Clear previous routes
    clearRoutes();

    // Add new routes
    if(routes[key]) {
        routes[key].forEach(r => {
            const routeDiv = document.createElement('div');
            routeDiv.classList.add('evacuation-route');
            routeDiv.style.top = r.top + 'px';
            routeDiv.style.left = r.left + 'px';
            routeDiv.style.width = r.width + 'px';
            routeDiv.style.height = r.height + 'px';
            mapContent.appendChild(routeDiv);
        });
    }
});

// Reset map
resetMapBtn.addEventListener('click', () => {
    campusMap.innerHTML = `<i class="fas fa-map-marked-alt" style="font-size:48px; margin-bottom:15px;"></i>
                           <p>IGDTUW Campus Map</p>
                           <p style="font-size:0.9rem; margin-top:10px;">Interactive evacuation routes would be displayed here</p>`;
    clearRoutes();
    if(selectedMarker) selectedMarker.classList.remove('selected');
    selectedMarker = null;
    locationInfo.style.display = 'none';
    buildingSelect.value = '';
    floorSelect.value = '';
});



</script>
</body>
</html>
